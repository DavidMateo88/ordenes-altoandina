<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Órdenes de Compra</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Órdenes de Compra</h1>
  <!-- Formulario de login -->
  <div id="login-form">
    <input type="text" id="username" placeholder="Usuario" required>
    <input type="password" id="password" placeholder="Contraseña" required>
    <button onclick="login()">Iniciar Sesión</button>
  </div>
  <!-- Panel principal -->
  <div id="app" style="display: none;">
    <!-- Formulario para crear/editar órdenes (Solicitante) -->
    <div id="orden-form" style="display: none;">
      <h2>Crear/Editar Orden</h2>
      <input type="hidden" id="orden-id">
      <input type="text" id="proyecto" placeholder="Proyecto" required>
      <input type="text" id="ubicacion" placeholder="Ubicación" required>
      <select id="deposito" required>
        <option value="">Seleccionar Depósito</option>
      </select>
      <textarea id="observaciones" placeholder="Observaciones (opcional)"></textarea>
      <div id="items-container">
        <div class="item-row">
          <input type="text" class="item-descripcion" placeholder="Descripción" required>
          <input type="text" class="item-codigo" placeholder="codigo (opcional)" required>
          <input type="number" class="item-cantidad" placeholder="Cantidad" required min="1">
          <input type="text" class="item-unidad" placeholder="Unidad" required>
          <button onclick="this.parentElement.remove()">Eliminar</button>
        </div>
      </div>
      <button onclick="addItemRow()">Añadir Ítem</button>
      <button id="create-orden" onclick="createOrden()">Crear Orden</button>
      <button id="save-orden" onclick="saveOrden()" style="display: none;">Guardar Cambios</button>
    </div>
    <!-- Formulario para cotizar órdenes (Cotizador) -->
<!-- Formulario para cotizar órdenes (Cotizador) -->
<div id="cotizar-form" style="display: none;">
  <h2>Cotizar Orden</h2>
  <div id="cotizar-orden-details"></div>
  <div id="cotizar-items-container"></div>
  <button onclick="saveCotizacion()">Guardar Cotización</button>
</div>

      <!-- Cargar factura -->
      <div id="factura-form" style="display: none;">
        <h3>Cargar Facturas</h3>
        <div id="facturas-container">
          <input type="text" class="factura-input" placeholder="Número de Factura">
        </div>
        <button onclick="addFacturaInput()">Añadir Factura</button>
        <button onclick="uploadFacturas()">Cargar Facturas</button>
      </div>
    </div>
    <!-- Lista de órdenes -->
    <h2>Mis Órdenes</h2>
    <div id="ordenes-controls" style="display: none;">
      <label for="filtro-estado">Filtrar por estado:</label>
      <select id="filtro-estado">
        <option value="">Todos</option>
        <option value="Pendiente">Pendiente</option>
        <option value="Cotizada">Cotizada</option>
        <option value="Modificada">Modificada</option>
        <option value="Aprobada">Aprobada</option>
        <option value="Rechazada">Rechazada</option>
        <option value="Completada">Completada</option>
      </select>
      <label for="filtro-proyecto">Filtrar por proyecto:</label>
      <select id="filtro-proyecto">
        <option value="">Todos</option>
      </select>
      <label for="ordenar-por">Ordenar por:</label>
      <select id="ordenar-por">
        <option value="fecha">Fecha de carga</option>
        <option value="estado">Estado</option>
      </select>
      <button onclick="toggleFinalizadas()">Mostrar/Ocultar Finalizadas</button>
    </div>
    <div id="ordenes-container"></div>
    <!-- Gestión de stock (solo Gerente) -->
    <div id="move-stock" style="display: none;">
      <h2>Mover Stock</h2>
      <input type="text" id="producto" placeholder="Buscar producto..." list="productos-sugeridos">
      <datalist id="productos-sugeridos"></datalist>
      <select id="origen-deposito" required>
        <option value="">Seleccionar Depósito Origen</option>
      </select>
      <select id="destino-deposito" required>
        <option value="">Seleccionar Depósito Destino</option>
      </select>
      <input type="number" id="cantidad" placeholder="Cantidad" required min="1">
      <button onclick="moveStock()">Mover Stock</button>
      <div id="stock-deposito-container"></div>
    </div>
    <!-- Gestión de depósitos (solo Gerente) -->
    <div id="gestion-depositos" style="display: none;">
      <h2>Gestionar Depósitos</h2>
      <input type="text" id="nuevo-deposito-nombre" placeholder="Nombre del Depósito">
      <input type="text" id="nuevo-deposito-ubicacion" placeholder="Ubicación del Depósito">
      <button onclick="createDeposito()">Crear Depósito</button>
      <div id="depositos-container"></div>
    </div>
    <!-- Informe de stock (solo Gerente) -->
    <div id="stock-report" style="display: none;">
      <h2>Informe de Stock</h2>
      <button onclick="generateStockPDF()">Generar PDF de Stock</button>
    </div>
  </div>
  <script src="script.js"></script>
</body>
</html>